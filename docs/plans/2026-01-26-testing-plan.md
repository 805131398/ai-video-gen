# AI 视频创作工具 - 测试计划

> 创建日期: 2026-01-26
> 状态: 进行中

---

## 一、测试环境准备

### 1.1 前置条件

- [ ] 数据库已迁移并有种子数据
- [ ] 开发服务器正常运行 (`npm run dev`)
- [ ] 已配置至少一个 AI 模型（TEXT 类型）
- [ ] 已登录测试账号

### 1.2 启动命令

```bash
cd web
npm run dev
```

---

## 二、功能测试用例

### 2.1 创作工作台 (首页)

| 编号 | 测试项 | 测试步骤 | 预期结果 | 状态 |
|------|--------|----------|----------|------|
| H-01 | 页面加载 | 访问 `/` | 显示创作工作台，步骤指示器显示"主题"为当前步骤 | [ ] |
| H-02 | 主题输入 | 输入主题文字，点击"开始创作" | 显示加载状态，成功后跳转到标题选择步骤 | [ ] |
| H-03 | 标题生成 | 完成主题输入后 | 显示 5 个生成的标题选项 | [ ] |
| H-04 | 标题选择 | 点击一个标题 | 跳转到属性设置步骤 | [ ] |
| H-05 | 标题重新生成 | 点击"重新生成" | 重新调用 API 生成新标题 | [ ] |
| H-06 | 属性设置 | 填写文案属性表单 | 表单验证通过，可提交 | [ ] |
| H-07 | 文案生成 | 提交属性后 | 显示 3 个生成的文案选项 | [ ] |
| H-08 | 文案选择 | 点击一个文案 | 跳转到图片生成步骤 | [ ] |
| H-09 | 图片生成 | 选择文案后 | 显示 4 张生成的图片 | [ ] |
| H-10 | 图片多选 | 选择多张图片，点击确认 | 跳转到视频生成步骤 | [ ] |
| H-11 | 视频生成 | 选择图片后 | 显示生成的视频（模拟数据） | [ ] |
| H-12 | 视频选择 | 选择视频 | 跳转到配音配置步骤 | [ ] |
| H-13 | 配音配置 | 选择音色、调整语速/音调 | 配置保存成功 | [ ] |
| H-14 | 配音生成 | 提交配音配置 | 生成配音（模拟），跳转到合成步骤 | [ ] |
| H-15 | 视频合成 | 点击"开始合成" | 显示进度条，完成后显示最终视频 | [ ] |
| H-16 | 新建作品 | 点击侧边栏"新建作品" | 重置所有状态，回到主题输入步骤 | [ ] |

### 2.2 版本回溯功能

| 编号 | 测试项 | 测试步骤 | 预期结果 | 状态 |
|------|--------|----------|----------|------|
| V-01 | 步骤点击 | 点击已完成的步骤 | 弹出操作对话框（查看/创建分支） | [ ] |
| V-02 | 查看历史 | 在对话框中点击"查看" | 进入只读模式，显示该步骤内容 | [ ] |
| V-03 | 只读模式 | 进入只读模式后 | 顶部显示只读提示横幅 | [ ] |
| V-04 | 退出只读 | 点击横幅上的关闭按钮 | 退出只读模式，回到最新状态 | [ ] |
| V-05 | 创建分支 | 在对话框中点击"从此创建分支" | 创建新版本，可继续编辑 | [ ] |

### 2.3 作品列表页

| 编号 | 测试项 | 测试步骤 | 预期结果 | 状态 |
|------|--------|----------|----------|------|
| P-01 | 页面加载 | 访问 `/projects` | 显示作品列表或空状态 | [ ] |
| P-02 | 作品卡片 | 有作品时 | 显示作品卡片（封面、标题、状态、时间） | [ ] |
| P-03 | 状态筛选 | 选择不同状态筛选 | 列表按状态过滤 | [ ] |
| P-04 | 搜索功能 | 输入搜索关键词 | 列表按关键词过滤 | [ ] |
| P-05 | 新建作品 | 点击"新建作品" | 跳转到首页创作工作台 | [ ] |
| P-06 | 查看作品 | 点击作品卡片 | 跳转到作品详情页 | [ ] |
| P-07 | 删除作品 | 点击删除按钮 | 弹出确认对话框，确认后删除 | [ ] |

### 2.4 作品详情页

| 编号 | 测试项 | 测试步骤 | 预期结果 | 状态 |
|------|--------|----------|----------|------|
| D-01 | 页面加载 | 访问 `/projects/[id]` | 显示作品详情和版本历史 | [ ] |
| D-02 | 版本列表 | 查看版本区域 | 显示所有版本，当前版本高亮 | [ ] |
| D-03 | 切换版本 | 点击其他版本 | 切换到该版本，显示对应内容 | [ ] |
| D-04 | 继续编辑 | 点击"继续编辑" | 跳转到创作工作台继续流程 | [ ] |

---

## 三、管理后台测试

### 3.1 AI 模型配置

| 编号 | 测试项 | 测试步骤 | 预期结果 | 状态 |
|------|--------|----------|----------|------|
| A-01 | 页面加载 | 访问 `/admin/ai-config` | 显示配置列表 | [ ] |
| A-02 | 新建配置 | 点击"新建配置"，填写表单 | 配置创建成功，列表更新 | [ ] |
| A-03 | 编辑配置 | 点击编辑按钮，修改配置 | 配置更新成功 | [ ] |
| A-04 | 删除配置 | 点击删除按钮 | 弹出确认，确认后删除 | [ ] |
| A-05 | 设为默认 | 点击"设为默认" | 该配置标记为默认 | [ ] |
| A-06 | 启用/禁用 | 切换启用状态 | 状态更新成功 | [ ] |

### 3.2 提示词模板

| 编号 | 测试项 | 测试步骤 | 预期结果 | 状态 |
|------|--------|----------|----------|------|
| T-01 | 页面加载 | 访问 `/admin/templates` | 显示模板列表 | [ ] |
| T-02 | 新建模板 | 点击"新建模板"，填写表单 | 模板创建成功 | [ ] |
| T-03 | 编辑模板 | 点击编辑按钮，修改内容 | 模板更新成功 | [ ] |
| T-04 | 删除模板 | 点击删除按钮 | 弹出确认，确认后删除 | [ ] |
| T-05 | 模板分类 | 按类型筛选模板 | 列表按类型过滤 | [ ] |

### 3.3 使用统计

| 编号 | 测试项 | 测试步骤 | 预期结果 | 状态 |
|------|--------|----------|----------|------|
| S-01 | 页面加载 | 访问 `/admin/ai-stats` | 显示统计卡片和表格 | [ ] |
| S-02 | 时间筛选 | 选择不同时间范围 | 数据按时间范围更新 | [ ] |
| S-03 | 类型筛选 | 选择不同模型类型 | 数据按类型过滤 | [ ] |
| S-04 | 统计卡片 | 查看汇总卡片 | 显示总调用、费用、成功率、延迟 | [ ] |
| S-05 | 模型分布 | 查看按模型类型统计表 | 显示各类型的调用次数和费用 | [ ] |
| S-06 | 调用记录 | 查看最近调用记录表 | 显示详细调用日志 | [ ] |

---

## 四、API 测试

### 4.1 作品 API

| 编号 | 接口 | 方法 | 测试要点 | 状态 |
|------|------|------|----------|------|
| API-01 | `/api/projects` | GET | 返回作品列表，支持分页 | [ ] |
| API-02 | `/api/projects` | POST | 创建新作品 | [ ] |
| API-03 | `/api/projects/[id]` | GET | 返回作品详情 | [ ] |
| API-04 | `/api/projects/[id]` | PUT | 更新作品信息 | [ ] |
| API-05 | `/api/projects/[id]` | DELETE | 删除作品 | [ ] |
| API-06 | `/api/projects/[id]/versions` | GET | 返回版本列表 | [ ] |
| API-07 | `/api/projects/[id]/versions` | POST | 创建新版本（分支） | [ ] |

### 4.2 AI 生成 API

| 编号 | 接口 | 方法 | 测试要点 | 状态 |
|------|------|------|----------|------|
| API-08 | `/api/ai/titles` | POST | 生成标题，返回数组 | [ ] |
| API-09 | `/api/ai/copywriting` | POST | 生成文案，返回数组 | [ ] |
| API-10 | `/api/ai/images` | POST | 生成图片，返回 URL 数组 | [ ] |
| API-11 | `/api/ai/videos` | POST | 生成视频（模拟） | [ ] |
| API-12 | `/api/ai/voice` | POST | 生成配音（模拟） | [ ] |
| API-13 | `/api/ai/compose` | POST | 合成视频（模拟） | [ ] |

### 4.3 管理 API

| 编号 | 接口 | 方法 | 测试要点 | 状态 |
|------|------|------|----------|------|
| API-14 | `/api/admin/ai-config` | GET | 返回配置列表 | [ ] |
| API-15 | `/api/admin/ai-config` | POST | 创建配置 | [ ] |
| API-16 | `/api/admin/ai-config/[id]` | PUT | 更新配置 | [ ] |
| API-17 | `/api/admin/ai-config/[id]` | DELETE | 删除配置 | [ ] |
| API-18 | `/api/admin/ai-stats` | GET | 返回使用统计 | [ ] |
| API-19 | `/api/admin/templates` | GET | 返回模板列表 | [ ] |
| API-20 | `/api/admin/templates` | POST | 创建模板 | [ ] |

---

## 五、错误处理测试

| 编号 | 测试场景 | 测试步骤 | 预期结果 | 状态 |
|------|----------|----------|----------|------|
| E-01 | 未登录访问 | 未登录状态访问页面 | 重定向到登录页 | [ ] |
| E-02 | AI 调用失败 | 模拟 AI API 错误 | 显示错误提示，可重试 | [ ] |
| E-03 | 网络错误 | 断开网络后操作 | 显示网络错误提示 | [ ] |
| E-04 | 表单验证 | 提交空表单或无效数据 | 显示验证错误信息 | [ ] |
| E-05 | 404 页面 | 访问不存在的作品 | 显示 404 或错误提示 | [ ] |

---

## 六、测试执行记录

### 测试轮次 1

- 日期：____
- 测试人员：____
- 测试环境：开发环境
- 测试结果：
  - 通过：__ 项
  - 失败：__ 项
  - 阻塞：__ 项

### 发现的问题

| 编号 | 问题描述 | 严重程度 | 状态 |
|------|----------|----------|------|
| | | | |

---

## 七、测试优先级

### 高优先级（必须通过）

1. H-01 ~ H-15：完整创作流程
2. A-01 ~ A-06：AI 配置管理
3. API-08 ~ API-10：核心 AI 生成接口

### 中优先级

1. P-01 ~ P-07：作品列表功能
2. V-01 ~ V-05：版本回溯功能
3. S-01 ~ S-06：使用统计

### 低优先级

1. T-01 ~ T-05：模板管理
2. E-01 ~ E-05：错误处理
