# AI 生成场景 - 优化场景描述提示词

**日期**: 2026-01-28
**类型**: Bug Fix
**问题**: AI 生成的场景中，description 字段内容不够具体

## 问题描述

用户反馈 AI 生成的场景中，`description`（场景描述）字段没有具体的内容，导致场景缺乏画面感。

### 问题原因

提示词中对 `description` 字段的说明太简单：

**之前的提示词**：
```
"description": "场景描述（20-50字）",
```

这个说明只规定了字数，但没有说明应该描述什么具体内容，导致 AI 生成的描述过于简单或空泛。

## 解决方案

### 优化提示词

在提示词中增加了详细的说明和要求：

**优化后的提示词**：
```
"description": "场景描述（20-50字，必须具体描述场景环境、氛围、角色位置和画面主要元素，要有画面感）",
```

### 增加场景创作要点

在"场景创作要点"部分增加了专门针对 description 的详细说明：

```
- **场景描述（description）必须具体生动**：
  * 描述场景的环境（如：明亮的办公室、药香四溢的小院、温馨的客厅）
  * 描述场景的氛围（如：温暖、紧张、轻松、神秘）
  * 描述角色的位置和状态（如：站在办公桌前、坐在沙发上、走在街道上）
  * 描述画面的主要元素（如：阳光洒满、灯光柔和、人来人往）
  * 要让人能够想象出具体的画面
```

### 优化示例

**之前的示例**：
```json
{
  "description": "主角在明亮的办公室里，面对镜头准备开始分享"
}
```

**优化后的示例**：
```json
{
  "description": "主角在明亮的办公室里，阳光透过落地窗洒在办公桌上，面对镜头准备开始分享，背景是整洁的书架和绿植"
}
```

## 对比效果

### 之前：描述简单

```json
{
  "title": "开场引入",
  "content": {
    "description": "办公室场景"
  }
}
```

**问题**：
- ❌ 过于简单，没有画面感
- ❌ 缺少环境细节
- ❌ 缺少氛围描述
- ❌ 缺少角色状态

### 现在：描述具体生动

```json
{
  "title": "开场引入",
  "content": {
    "description": "主角在明亮的办公室里，阳光透过落地窗洒在办公桌上，面对镜头准备开始分享，背景是整洁的书架和绿植"
  }
}
```

**优势**：
- ✅ 具体描述环境（明亮的办公室、落地窗）
- ✅ 描述氛围（阳光洒在桌上）
- ✅ 描述角色状态（面对镜头准备分享）
- ✅ 描述画面元素（书架和绿植）
- ✅ 有画面感，能想象出具体场景

## 场景描述的四个要素

根据优化后的提示词，AI 生成的场景描述应该包含：

### 1. 场景环境
描述场景发生的地点和环境特征

**示例**：
- "明亮的办公室"
- "药香四溢的小院"
- "温馨的客厅"
- "繁华的街道"
- "宁静的公园"

### 2. 场景氛围
描述场景的整体感觉和情绪

**示例**：
- "温暖"、"轻松"、"舒适"
- "紧张"、"神秘"、"压抑"
- "欢快"、"热闹"、"活泼"
- "宁静"、"安详"、"平和"

### 3. 角色位置和状态
描述角色在场景中的位置和当前状态

**示例**：
- "站在办公桌前"
- "坐在沙发上"
- "走在街道上"
- "躺在草地上"
- "靠在窗边"

### 4. 画面主要元素
描述画面中的关键视觉元素

**示例**：
- "阳光透过落地窗洒在桌上"
- "灯光柔和"
- "人来人往"
- "绿植环绕"
- "书架整洁"

## 实际应用示例

### 示例 1：健康疾病类

**场景标题**: "药香小院专注研磨"

**优化前的描述**：
```
老中医在小院里研磨草药
```

**优化后的描述**：
```
阳光洒满药香四溢的小院，老中医身着唐装，正神情专注地研磨着石臼里的草药，周围摆放着各种药材和器具
```

### 示例 2：产品评测类

**场景标题**: "开箱测试"

**优化前的描述**：
```
主播在桌前开箱
```

**优化后的描述**：
```
主播坐在整洁的工作台前，灯光明亮，桌面上摆放着待开箱的产品和测试工具，背景是专业的评测设备
```

### 示例 3：美食探店类

**场景标题**: "品尝招牌菜"

**优化前的描述**：
```
在餐厅品尝美食
```

**优化后的描述**：
```
温馨的餐厅里，灯光柔和，主角坐在靠窗的位置，桌上摆放着刚上桌的招牌菜，热气腾腾，香气扑鼻
```

## 修改的文件

1. **修改**: `web/src/app/api/projects/[id]/scripts/generate-scenes/route.ts`
   - 优化 `description` 字段的说明
   - 增加场景描述的详细要点
   - 优化示例中的 description 内容

## 测试验证

### 测试用例

**输入**:
- 项目主题: "父亲腰痛的康复之路"
- 角色: 草根老中医
- 场景数量: 5

**预期输出**:
每个场景的 `description` 字段应该包含：
- ✅ 具体的环境描述
- ✅ 场景氛围
- ✅ 角色位置和状态
- ✅ 画面主要元素
- ✅ 20-50 字的具体描述

### TypeScript 编译

```bash
✓ 无 generate-scenes 相关编译错误
```

## 用户体验提升

### 之前
- 场景描述过于简单
- 缺乏画面感
- 难以想象具体场景
- 需要用户手动补充细节

### 现在
- 场景描述具体生动
- 有清晰的画面感
- 能够想象出具体场景
- 用户只需微调即可

## 总结

通过优化提示词，明确了场景描述的四个要素（环境、氛围、角色状态、画面元素），并提供了详细的说明和更好的示例，确保 AI 生成的场景描述具体、生动、有画面感。

**关键改进**：
1. ✅ 明确了 description 字段的具体要求
2. ✅ 增加了场景描述的四个要素说明
3. ✅ 优化了示例，展示更具体的描述
4. ✅ 强调了"要有画面感"的要求

现在 AI 生成的场景描述能够让用户清晰地想象出具体的画面，大大提升了场景的可用性。
